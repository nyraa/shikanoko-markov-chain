(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8613:function(t,e,n){Promise.resolve().then(n.bind(n,2879))},2879:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return d}});var r=n(7437),a=n(2265),s=n(7813);n(5840);class c{constructor(t,e,n,r,a,s){this.id=t,this.label=e,this.duration=r-n,this.start=n,this.end=r,this.x=a,this.y=s}}class o{constructor(t,e,n){this.source=t,this.target=e,this.probability=n}}function i(t){let{states:e,links:n,width:c=800,height:o=600,setSeek:i,isRunning:l}=t,d=(0,a.useRef)(null),u=(0,a.useRef)(e[0]),h=(t,e,n,r)=>{let a=Math.atan2(r-e,n-t);return"M".concat(t," ").concat(e," Q").concat((t+n)/2+-50*Math.cos(a+Math.PI/2)," ").concat((e+r)/2+-50*Math.sin(a+Math.PI/2),", ").concat(n," ").concat(r)},p=(t,e)=>{let n=e>o/2?100:-100;return"M".concat(t," ").concat(e," C").concat(t+n," ").concat(e+n,", ").concat(t-n," ").concat(e+n,", ").concat(t," ").concat(e)},f=t=>{let r=n.filter(e=>e.source===t.id),a=Math.random(),s=0;for(let t=0;t<r.length;t++)if(a<(s+=r[t].probability))return e.find(e=>e.id===r[t].target);return t},w=(0,a.useRef)(null),y=()=>{var t;let n=null!==(t=f(u.current))&&void 0!==t?t:e[3];s.Ys("#node_".concat(u.current.id)).classed("current-node",!1),s.Ys("#node_".concat(n.id)).classed("current-node",!0),u.current=n,i(u.current.start),w.current=setTimeout(y,1e3*u.current.duration)};return(0,a.useEffect)(()=>{let t=s.Ys(d.current).attr("width",c).attr("height",o);t.append("defs").append("marker").attr("id","arrowhead").attr("viewBox","-0 -5 10 10").attr("refX",13).attr("refY",0).attr("orient","auto").attr("markerWidth",13).attr("markerHeight",13).attr("xoverflow","visible").append("svg:path").attr("d","M 0,-5 L 6,0 L 0,5").attr("fill","#999").style("stroke","none"),t.append("g").attr("class","edges").selectAll("path").data(n).enter().append("path").attr("class","edge").attr("marker-end","url(#arrowhead)").attr("d",t=>{let n=e.find(e=>e.id===t.source),r=e.find(e=>e.id===t.target);return n&&r?n.x===r.x&&n.y===r.y?p(n.x,n.y):h(n.x,n.y,r.x,r.y):""}),t.append("g").attr("class","edge-labels").selectAll("text").data(n).enter().append("text").attr("x",t=>{let n=e.find(e=>e.id===t.source),r=e.find(e=>e.id===t.target);return n&&r?(n.x+r.x)/2:0}).attr("y",t=>{let n=e.find(e=>e.id===t.source),r=e.find(e=>e.id===t.target);return n&&r?(n.y+r.y)/2:0}).text(t=>t.probability),t.append("g").attr("class","nodes").selectAll("circle").data(e).enter().append("circle").attr("id",t=>"node_".concat(t.id)).attr("class","node").attr("r",20).attr("cx",t=>t.x).attr("cy",t=>t.y),t.append("g").attr("class","labels").selectAll("text").data(e).enter().append("text").attr("class","label").attr("x",t=>t.x).attr("y",t=>t.y).text(t=>t.label),s.Ys("#node_shi").classed("current-node",!0),w.current=setTimeout(y,1e3*u.current.duration)},[]),(0,a.useEffect)(()=>{l?setTimeout(y,1e3*u.current.duration):w.current&&clearTimeout(w.current)},[l]),(0,r.jsx)("svg",{ref:d})}var l=n(565);function d(){let t=[new c("shi","し",.91,1,400,300),new c("ka","か",1,1.16,550,200),new c("no","の",1.16,1.33,700,300),new c("ko","こ",1.33,1.5,550,400),new c("ta","た",2.46,2.66,250,400),new c("n","ん",2.66,2.87,100,300),new c("empty","",3.08,3.5,250,200)],e=[new o("shi","ka",.5),new o("ka","no",1),new o("no","ko",1),new o("ko","no",.5),new o("ko","ko",.25),new o("ko","shi",.25),new o("shi","ta",.5),new o("ta","n",1),new o("n","ta",.5),new o("n","empty",.5),new o("empty","empty",.5),new o("empty","shi",.5)],n=(0,a.useRef)(null),[s,d]=(0,a.useState)(!1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Z,{ref:n,videoId:"ZZvIVRQ4E7I",opts:{height:"390",width:"640",playerVars:{autoplay:0,controls:0}},onPlay:()=>{d(!0)},onPause:()=>{d(!1)}}),(0,r.jsx)(i,{states:t,links:e,setSeek:t=>{n.current&&n.current.internalPlayer.seekTo(t)},isRunning:s})]})}},5840:function(){}},function(t){t.O(0,[764,135,971,23,744],function(){return t(t.s=8613)}),_N_E=t.O()}]);